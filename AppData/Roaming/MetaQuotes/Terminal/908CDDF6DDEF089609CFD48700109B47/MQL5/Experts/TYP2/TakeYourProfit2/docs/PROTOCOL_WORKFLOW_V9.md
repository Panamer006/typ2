# v9: Рабочая связка GPT + Кодекс + Cursor

Эталонный Протокол v9.0: Взаимодействие в Экосистеме GPT + Codex + Cursor
Цель: Обеспечить предсказуемый, безошибочный и эффективный цикл разработки с четким разделением ответственности между ролями.
Ключевая Философия: Мы переходим от "жестких скриптов" к "управляемой свободе". Каждая роль получает атомарные, точные параметры для своей работы, а исполнение происходит в наиболее удобной для этого среде.

## Раздел 1: Новые Роли и Зоны Ответственности

### Оркестратор Проекта (Вы, Босс):
- **Зона ответственности**: Стратегическое управление, инициация задач, финальное утверждение (компиляция, слияние PR), управление командой ИИ.
- **Основной инструмент**: Чат с GPT (для постановки задач), MetaEditor (для контроля качества), GitHub (для утверждения).

### Главный Архитектор (GPT-4/5):
- **Зона ответственности**: "Думающая" часть. Анализ "сырых" ТЗ, синтез информации, проектирование архитектуры, создание финальных "чертежей" и детализированных промптов.
- **Основной инструмент**: Проект GPT с загруженной "Базой Знаний".

### Инженер-Консультант (Codex):
- **Зона ответственности**: "Справочник". Помогает Архитектору с синтаксически сложными или нестандартными конструкциями MQL5. Не является обязательным участником каждого этапа.
- **Основной инструмент**: Вызывается Архитектором по мере необходимости.

### Инженер-Исполнитель (Cursor):
- **Зона ответственности**: "Руки". Безошибочное исполнение инструкций из промпта. Физически создает и изменяет файлы в локальной папке проекта.
- **Основной инструмент**: Cursor IDE.

### Методолог Проекта (Я, Gemini):
- **Зона ответственности**: "Хранитель Процесса". Помогаю вам ставить правильные задачи Архитектору, контролирую соблюдение этого Протокола, помогаю с "разбором полетов" в случае сбоев.

## Раздел 2: Полный Цикл Работы над Задачей

### ЭТАП 1: ПРОЕКТИРОВАНИЕ И ФИКСАЦИЯ "ЧЕРТЕЖА" (ТЗ)

**Действие (Босс)**: Инициирует задачу в чате с Архитектором (GPT): "Приступаем к [ИМЯ_ЗАДАЧИ]. Вот 'сырое' ТЗ..."

**Действие (Архитектор)**: Анализирует "сырое" ТЗ, обращаясь к "Базе Знаний". Генерирует финальный, готовый к копированию контент для .md файла.

**Действие (Босс)**:
1. Вручную создает файл [ИМЯ_ФАЙЛА_ТЗ].md в папке docs/tech_specs/.
2. Вставляет в него контент от Архитектора.

**Действие (Архитектор)**: Дает атомарные параметры для фиксации.
*Пример инструкции*: "Зафиксируй 'чертеж'. Сообщение коммита: docs(spec): Add tech spec for [ИМЯ_ЗАДАЧИ]".

**Действие (Босс)**:
1. Открывает Cursor.
2. Используя графический интерфейс Git в Cursor:
   - Ставит галочку напротив нового файла .md.
   - В поле "Commit Message" вставляет точное сообщение от Архитектора.
   - Нажимает "Commit".
   - Нажимает "Push".

### ЭТАП 2: РЕАЛИЗАЦИЯ КОДА

**Действие (Архитектор)**: Дает атомарные параметры для создания ветки и полный промпт для Cursor.
*Пример инструкции*: "Подготовь рабочее место. Имя новой ветки: feature/[КРАТКОЕ-ИМЯ-ЗАДАЧИ]. Промпт для Cursor: [полный текст промпта]".

**Действие (Босс)**:
1. В Cursor, используя интерфейс Git, создает новую ветку с точным именем от Архитектора.
2. Передает промпт Инженеру (Cursor).

**Действие (Инженер)**: Исполняет промпт, физически изменяя файлы на диске. Предоставляет отчет.

**Действие (Босс)**:
1. Единственная задача: Открывает MetaEditor и нажимает "Компиляция".
2. Сообщает Архитектору результат: 0 errors, 0 warnings.

### ЭТАП 3: ВЫГРУЗКА И КОД-РЕВЬЮ

**Действие (Архитектор)**: Дает атомарные параметры для выгрузки.
*Пример инструкции*: "Выгрузи готовый код. Сообщение коммита: feat([модуль]): [ИМЯ_ЗАДАЧИ] Краткое описание".

**Действие (Босс)**:
1. В Cursor, используя интерфейс Git:
   - Ставит галочки напротив всех измененных файлов.
   - В поле "Commit Message" вставляет точное сообщение от Архитектора.
   - Нажимает "Commit".
   - Нажимает "Push".

**Действие (Босс)**: Создает Pull Request на GitHub, заполняя заголовок и описание точными данными от Архитектора. Присылает ссылку.

**Действие (Архитектор)**: Проводит код-ревью и дает вердикт: "Ревью пройдено. Можно сливать (merge)."

### ЭТАП 4: ЗАВЕРШЕНИЕ ЗАДАЧИ

**Действие (Босс)**: Нажимает "Squash and merge" и "Delete branch" на GitHub.

**Действие (Архитектор)**: Дает финальные инструкции по синхронизации.
*Пример инструкции*: "Синхронизируй рабочее место. Переключись на ветку: main. Удали локальную ветку: feature/[КРАТКОЕ-ИМЯ-ЗАДАЧИ]. Синхронизируйся с сервером."

**Действие (Босс)**:
1. В Cursor, используя интерфейс Git:
   - Переключается на ветку main.
   - Нажимает "Pull" (или "Fetch" + "Merge") для синхронизации с dev.
   - Удаляет уже ненужную feature-ветку.

## Отчеты и Ответственность за Коммиты

- **Архитектор (GPT)**: Не делает коммиты. Он — источник параметров для коммитов.
- **Codex**: Не делает коммиты. Он — консультант для Архитектора.
- **Cursor**: Не делает коммиты. Он — изменяет файлы.
- **Босс (Вы)**: Вы — автор всех коммитов. Вы физически нажимаете кнопку "Commit", используя интерфейс Cursor и точные данные от Архитектора. Это отражает вашу роль как финального контролера и "интегратора" работы всей команды.
